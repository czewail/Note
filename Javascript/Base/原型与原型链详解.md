# åŸå‹ä¸åŸå‹é“¾è¯¦è§£

## æ™®é€šå¯¹è±¡ä¸å‡½æ•°å¯¹è±¡

å…ˆçœ‹æ —å­ğŸŒ°ï¼š

```javascript
var test = {}
console.log(typeof test) // object

/*------------------------------------*/

function fun() {}
var test = new fun()
console.log(typeof test) // object

/*------------------------------------*/

var test = new Object()
console.log(typeof test) // object

/*------------------------------------*/
/*------------------------------------*/

function test() {}
console.log(typeof test) // function

/*------------------------------------*/

var test = function() {}
console.log(typeof test) // function

/*------------------------------------*/

var test = new Function('arg','console.log(arg)');
console.log(typeof test) // function
```

æ€»ç»“ï¼šæ‰€æœ‰é€šè¿‡`new Function()`åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯å‡½æ•°å¯¹è±¡ï¼Œå…¶ä»–çš„éƒ½æ˜¯æ™®é€šå¯¹è±¡ã€‚

## æ„é€ å‡½æ•°

å…ˆä¸¾ä¸ªæ —å­ğŸŒ°ï¼š

```javascript
function Person(name, age, job) {
 this.name = name;
 this.age = age;
 this.sayName = function() { alert(this.name) }
}
var person1 = new Person('liming', 28, 'Student');
var person2 = new Person('lily', 23, 'Teacher');
```

person1 å’Œ person2 éƒ½æ˜¯ Person çš„å®ä¾‹ã€‚è¿™ä¸¤ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ª constructor ï¼ˆæ„é€ å‡½æ•°ï¼‰å±æ€§ï¼Œè¯¥å±æ€§ï¼ˆæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼‰æŒ‡å‘ Personã€‚

```javascript
console.log(person1.constructor == Person); //true
console.log(person2.constructor == Person); //true
```
> person1 å’Œ person2 éƒ½æ˜¯ æ„é€ å‡½æ•° Person çš„å®ä¾‹, å®ä¾‹çš„æ„é€ å‡½æ•°å±æ€§ï¼ˆconstructorï¼‰æŒ‡å‘æ„é€ å‡½æ•°ã€‚

## åŸå‹å¯¹è±¡

åœ¨JavaScript ä¸­ï¼Œæ¯å½“å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ—¶å€™ï¼Œå¯¹è±¡ä¸­éƒ½ä¼šåŒ…å«ä¸€äº›é¢„å®šä¹‰çš„å±æ€§ã€‚å…¶ä¸­å‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªå±æ€§å°±æ˜¯åŸå‹å¯¹è±¡ prototype, è¿™ä¸ªå±æ€§æŒ‡å‘å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚

> æ³¨ï¼šæ™®é€šå¯¹è±¡æ²¡æœ‰prototype,ä½†æœ‰__proto__å±æ€§ã€‚

åŸå‹å¯¹è±¡å…¶å®å°±æ˜¯æ™®é€šå¯¹è±¡ï¼ˆFunction.prototypeé™¤å¤–,å®ƒæ˜¯å‡½æ•°å¯¹è±¡ï¼Œä½†å®ƒå¾ˆç‰¹æ®Šï¼Œä»–æ²¡æœ‰prototypeå±æ€§ï¼ˆå‰é¢è¯´é“å‡½æ•°å¯¹è±¡éƒ½æœ‰prototypeå±æ€§ï¼‰ï¼‰ã€‚

ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š

```javascript
function f1(){};
console.log(f1.prototype) // Object {constructor: function} f1.prototypeå°±æ˜¯ f1çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚å°±æ˜¯åœ¨f1åˆ›å»ºçš„æ—¶å€™,åˆ›å»ºäº†ä¸€ä¸ªå®ƒçš„å®ä¾‹å¯¹è±¡å¹¶èµ‹å€¼ç»™å®ƒçš„prototype
console.log(typeof f1.prototype) // object
console.log(typeof Function.prototype) // function
console.log(typeof Object.prototype) // object
console.log(typeof Function.prototype.prototype) //undefined
```

åŸå‹å¯¹è±¡çš„ä¸»è¦ä½œç”¨æ˜¯ç”¨äºç»§æ‰¿

ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š

```javascript
var person = function(name){
ã€€ã€€this.name = name
};
person.prototype.getName = function(){
  return this.name;
}
var liming = new person('liming')
liming.getName(); //liming
```
ä»è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œé€šè¿‡ç»™person.prototypeè®¾ç½®äº†ä¸€ä¸ªå‡½æ•°å¯¹è±¡çš„å±æ€§ï¼Œé‚£æœ‰personå®ä¾‹å‡ºæ¥çš„æ™®é€šå¯¹è±¡å°±ç»§æ‰¿äº†è¿™ä¸ªå±æ€§ã€‚


## åŸå‹é“¾

JSåœ¨åˆ›å»ºå¯¹è±¡ï¼ˆä¸è®ºæ˜¯æ™®é€šå¯¹è±¡è¿˜æ˜¯å‡½æ•°å¯¹è±¡ï¼‰çš„æ—¶å€™ï¼Œéƒ½æœ‰ä¸€ä¸ªå«åš__proto__çš„å†…ç½®å±æ€§ï¼Œç”¨äºæŒ‡å‘åˆ›å»ºå®ƒçš„å‡½æ•°å¯¹è±¡çš„åŸå‹å¯¹è±¡prototypeã€‚

```javascript
var person = function(name){
ã€€ã€€this.name = name
};
person.prototype.getName = function(){
  return this.name;
}
var liming = new person('liming');

console.log(liming.__proto__ === person.prototype) //true
console.log(person.prototype.__proto__ === Object.prototype) //true, person.prototypeå¯¹è±¡ä¹Ÿæœ‰__proto__å±æ€§ï¼Œå®ƒæŒ‡å‘åˆ›å»ºå®ƒçš„å‡½æ•°å¯¹è±¡ï¼ˆObjectï¼‰çš„prototype
console.log(Object.prototype.__proto__) //null, Object.prototypeå¯¹è±¡ä¹Ÿæœ‰__proto__å±æ€§ï¼Œä½†å®ƒæ¯”è¾ƒç‰¹æ®Šï¼Œä¸ºnull
```
æˆ‘ä»¬æŠŠè¿™ä¸ªæœ‰__proto__ä¸²èµ·æ¥çš„ç›´åˆ°`Object.prototype.__proto__`ä¸ºnullçš„é“¾å«åšåŸå‹é“¾
